{% extends "base_generic.html" %}

{% block content %}
<script>
$(document).ready(function(){

  var setlen = $(".Record").length;
  $(".Record").each(function(index){
    $("#flip_"+index+"").click(function(){
    $("#detail_"+index+"").slideToggle("slow");
	});
  });
    $("#flip_"+setlen+"").click(function(){
    $("#detail_"+setlen+"").slideToggle("slow");
	});
  
});
</script>
  <h1> {{ patient}}</h1>
  <p><strong>身高:</strong> {{ patient.height}}</p>
  <p><strong>體重:</strong> {{ patient.weight}}</p>
  <p><strong>BMI:</strong> {{ patient.BMI}}</p>
  <p><strong>血型:</strong> {{ patient.bloodtype}}</p>
  <p><strong>生日:</strong> {{ patient.date_of_birth }}</p> 
  <p><strong>下次約診日:</strong> {{ patient.return_date}}</p>  
  <p><strong>病史:</strong> {% for illness in patient.illness.all %} {{ illness }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>  

  <div style="margin-left:20px;margin-top:20px">
    <h4>過去看診紀錄</h4>

    {% for record in patient.treatment_record_set.all %}
    <hr>
	<p id ="flip_{{forloop.counter}}" class = "Record"><strong>{{ record.date }}</strong></p><!--link to each record... not yet defined -->
	<p id = "detail_{{forloop.counter}}" style="display: none;">{{record.treatment_detail	}}</p>
	
	
    {% endfor %}


  </div>
{% endblock %}